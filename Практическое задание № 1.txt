-- 1 Создание БД
CREATE TABLE dept (
	dept_id INTEGER NOT NULL,
	dname VARCHAR(20),
	PRIMARY KEY(dept_id)
);

CREATE TABLE emp (
	emp_id INTEGER NOT NULL,
	dept_id INTEGER NOT NULL,
	ename VARCHAR(15),
	salary NUMERIC(6,2),
	PRIMARY KEY(emp_id),
	FOREIGN KEY(dept_id) REFERENCES dept(dept_id)
);

-- 2 Заполнение БД
INSERT INTO dept VALUES 
	(1, 'Marketing'),
	(2, 'RD');

INSERT INTO emp (
	emp_id, dept_id, ename, salary
) VALUES
	(1, 1, 'James', 1000),
	(2, 2, 'Smith', 2000);
	
-- 3 Создание новой таблицы
CREATE TABLE dept_arch (
	dept_id INTEGER NOT NULL,
	dname VARCHAR(20),
	PRIMARY KEY(dept_id)
);

-- 4 Заполнение новой таблицы
INSERT INTO dept_arch (
	SELECT * 
	FROM dept
);

-- 5 Увеличение ЗП
UPDATE emp
SET salary = salary + salary * 0.15
WHERE ename = 'Smith';

-- 6 Попытка добавить запись в таблицу dept
INSERT INTO dept VALUES (
	2, 'Sales'
);
-- Запись с ID 2 уже есть в таблице dept

-- 7 Попытка добавить запись в таблицу emp
INSERT INTO emp VALUES (
	3, 4, 'Black', 3000, 'Active'
);
-- Значений больше столбцов
-- В таблице dept нет записи с ID 4

-- 8 Изменение названия отеда
UPDATE dept
SET dname = 'RandD'
WHERE dname = 'RD';

-- 9 Удаление сотрудника
DELETE FROM emp
WHERE emp_id = 1;

-- 10 Очистка таблицы
TRUNCATE TABLE emp;

-- 11 Удаление таблицы
DROP TABLE emp;